<!DOCTYPE html>
<html lang="en">
<head>
  <title>首頁</title>
  <%- include('js') %>
</head>
<body>

   <%- include('sidebar') %>
   
   <!-- 主內容區域 -->
  <div class="content">
    <h2>選擇日期區間計算處方成本</h2>
	
    <form action="/calculate" method="GET">
    <label for="startdate">开始日期:</label>
    <input type="date" id="startdate" name="startdate" required>
    <br>
    <label for="enddate">结束日期:</label>
    <input type="date" id="enddate" name="enddate" required>
    <br>
    <button type="submit">计算</button>
    </form>
  

    <h2>來客時間分布</h2>
    <form action="/customer-time-chart" method="POST">
    <label for="predate">选择日期：</label>
    <input type="date" id="predate" name="predate" required>
    <button type="submit">查看來客時間圖表</button>
    </form>
    <script>
    // 获取当前日期
    //const today = new Date();
    // 获取当前日期
    //const today = new Date();
    //const year = today.getFullYear();
    //const month = String(today.getMonth() + 1).padStart(2, '0'); // 月份从 0 开始，+1，并保证是两位数
    //const day = String(today.getDate()).padStart(2, '0'); // 保证是两位数

    </script> 
    <script>

    // 將 URL 設置到超連結
  
    dynamicLink.textContent = ` ${year}-${month} 月處方數`;
    
    // 设置预设值到日期输入框
	  document.getElementById('predate').value = formattedDate;
	  document.getElementById('startdate').value = formattedDate;
	  document.getElementById('enddate').value = formattedDate;

    </script>
    <h1>查詢藥品健保碼</h1>
  
    <!-- 表单让用户输入药品健保码 -->
    <form action="/searchByInsuranceCode" method="POST">
    <label for="dinsuranceCode">藥品健保碼:</label>
    <input type="text" id="dinsuranceCode" name="dinsuranceCode" required>
    <button type="submit">查詢</button>
    </form>



    <h2>選擇日期區間計算處方成本</h2>
    <form action="/searchByDate" method="POST">
    <label for="startdate">開始日期：</label>
    <input type="date" id="startdate" name="startdate" required>
    <label for="enddate">結束日期：</label>
    <input type="date" id="enddate" name="enddate" required>

    <button type="submit">計算成本</button>
    </form>
	
    <form action="/customerTimeChart" method="get">
    <label for="predate">選擇日期:</label>
    <input type="date" id="predate" name="predate" required>
    <button type="submit">提交</button>
    </form>


    <script>
    document.getElementById('searchForm').addEventListener('submit', async function(event) {
    event.preventDefault();
    const query = document.getElementById('query').value;

    const response = await fetch(`/searchPrescription?query=${query}`, {
    method: 'GET',
    headers: {
      'Content-Type': 'application/json'
    }
    });

    const result = await response.json();

    if (result.errorMessage) {
    alert(result.errorMessage);
    } else {
    // 将查询结果存储在本地存储中
    localStorage.setItem('searchResult', JSON.stringify(result));
    // 跳转到结果页面
    window.location.href = '/result';
    }
    });
    </script>


    <h1>檢驗報告日期查詢</h1>
    <form action="/getReports" method="POST">
    <label for="startDate">開始日期：</label>
    <input type="date" id="startDate" name="startDate" required>
    
    <label for="endDate">結束日期：</label>
    <input type="date" id="endDate" name="endDate" required>
    
    <button type="submit">查詢報告</button>
    </form>

    <h3>年齡分布</h3>
    <form action="/getReportsAge" method="POST">
    <label for="startDate">開始日期：</label>
    <input type="date" id="startDate" name="startDate" required>
    
    <label for="endDate">結束日期：</label>
    <input type="date" id="endDate" name="endDate" required>
    
    <button type="submit">查詢報告</button>
    </form>


</body>
</html>